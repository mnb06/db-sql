CREATE TABLE ASSIGNMENT (
ASSIGN_NUM int,
ASSIGN_DATE date,
PROJ_NUM varchar(3),
EMP_NUM varchar(3),
ASSIGN_JOB varchar(3),
ASSIGN_CHG_HR float(8),
ASSIGN_HOURS float(8),
ASSIGN_CHARGE float(8)
);

INSERT INTO ASSIGNMENT VALUES('1001','22/3/2010','18','103','503','84.5','3.5','295.75');
INSERT INTO ASSIGNMENT VALUES('1002','22/3/2010','22','117','509','34.55','4.2','145.11');
INSERT INTO ASSIGNMENT VALUES('1003','22/3/2010','18','117','509','34.55','2','69.10');
INSERT INTO ASSIGNMENT VALUES('1004','22/3/2010','18','103','503','84.5','5.9','498.55');
INSERT INTO ASSIGNMENT VALUES('1005','22/3/2010','25','108','501','96.75','2.2','212.85');
INSERT INTO ASSIGNMENT VALUES('1006','22/3/2010','22','104','501','96.75','4.2','406.35');
INSERT INTO ASSIGNMENT VALUES('1007','22/3/2010','25','113','508','50.75','3.8','192.85');
INSERT INTO ASSIGNMENT VALUES('1008','22/3/2010','18','103','503','84.5','0.9','76.05');
INSERT INTO ASSIGNMENT VALUES('1009','23/3/2010','15','115','501','96.75','5.6','541.80');
INSERT INTO ASSIGNMENT VALUES('1010','23/3/2010','15','117','509','34.55','2.4','82.92');
INSERT INTO ASSIGNMENT VALUES('1011','23/3/2010','25','105','502','105','4.3','451.5');
INSERT INTO ASSIGNMENT VALUES('1012','23/3/2010','18','108','501','96.75','3.4','328.95');
INSERT INTO ASSIGNMENT VALUES('1013','23/3/2010','25','115','501','96.75','2','193.5');
INSERT INTO ASSIGNMENT VALUES('1014','23/3/2010','22','104','501','96.75','2.8','270.9');
INSERT INTO ASSIGNMENT VALUES('1015','23/3/2010','15','103','503','84.5','6.1','515.45');
INSERT INTO ASSIGNMENT VALUES('1016','23/3/2010','22','105','502','105','4.7','493.5');
INSERT INTO ASSIGNMENT VALUES('1017','23/3/2010','18','117','509','34.55','3.8','131.29');
INSERT INTO ASSIGNMENT VALUES('1018','23/3/2010','25','117','509','34.55','2.2','76.01');
INSERT INTO ASSIGNMENT VALUES('1019','24/3/2010','25','104','501','110.5','4.9','541.45');
INSERT INTO ASSIGNMENT VALUES('1020','24/3/2010','15','101','502','125','3.1','387.5');
INSERT INTO ASSIGNMENT VALUES('1021','24/3/2010','22','108','501','110.5','2.7','298.35');
INSERT INTO ASSIGNMENT VALUES('1022','24/3/2010','22','115','501','110.5','4.9','541.45');
INSERT INTO ASSIGNMENT VALUES('1023','24/3/2010','22','105','502','125','3.5','437.5');
INSERT INTO ASSIGNMENT VALUES('1024','24/3/2010','15','103','503','84.5','3.3','278.85');
INSERT INTO ASSIGNMENT VALUES('1025','24/3/2010','18','117','509','34.55','4.2','145.11');

/* -- */

CREATE TABLE EMP_1 (
EMP_NUM varchar(3),
EMP_LNAME varchar(15),
EMP_FNAME varchar(15),
EMP_INITIAL varchar(1),
EMP_HIREDATE date,
JOB_CODE varchar(3)
);
INSERT INTO EMP_1 VALUES('101','News','John','G','8/11/2000','502');
INSERT INTO EMP_1 VALUES('102','Senior','David','H','12/7/1989','501');
INSERT INTO EMP_1 VALUES('103','Arbough','June','E','1/12/1996','500');
INSERT INTO EMP_1 VALUES('104','Ramoras','Anne','K','15/11/1987','501');
INSERT INTO EMP_1 VALUES('105','Johnson','Alice','K','1/2/1993','502');
INSERT INTO EMP_1 VALUES('106','Smithfield','William','','22/6/2004','500');
INSERT INTO EMP_1 VALUES('107','Alonzo','Maria','D','10/10/1993','500');
INSERT INTO EMP_1 VALUES('108','Washington','Ralph','B','22/8/1991','501');
INSERT INTO EMP_1 VALUES('109','Smith','Larry','W','18/7/1997','501');

/* -- */

CREATE TABLE EMP_2 (
EMP_NUM varchar(3),
EMP_LNAME varchar(15),
EMP_FNAME varchar(15),
EMP_INITIAL varchar(1),
EMP_HIREDATE date,
JOB_CODE varchar(3),
EMP_PCT float(8),
PROJ_NUM varchar(2)
);
INSERT INTO EMP_2 VALUES('101','News','John','G','8/11/2000','502','5','');
INSERT INTO EMP_2 VALUES('102','Senior','David','H','12/7/1989','501','8','');
INSERT INTO EMP_2 VALUES('103','Arbough','June','E','1/12/1996','500','3.85','');
INSERT INTO EMP_2 VALUES('104','Ramoras','Anne','K','15/11/1987','501','10','');
INSERT INTO EMP_2 VALUES('105','Johnson','Alice','K','1/2/1993','502','5','');
INSERT INTO EMP_2 VALUES('106','Smithfield','William','','22/6/2004','500','6.2','');
INSERT INTO EMP_2 VALUES('107','Alonzo','Maria','D','10/10/1993','500','5.15','');
INSERT INTO EMP_2 VALUES('108','Washington','Ralph','B','22/8/1991','501','10','');
INSERT INTO EMP_2 VALUES('109','Smith','Larry','W','18/7/1997','501','2','');

/* -- */

CREATE TABLE EMP_2_MOD (
EMP_NUM varchar(3),
EMP_LNAME varchar(15),
EMP_FNAME varchar(15),
EMP_INITIAL varchar(1),
EMP_HIREDATE date,
JOB_CODE varchar(3),
EMP_PCT float(8),
PROJ_NUM varchar(2)
);
INSERT INTO EMP_2_MOD VALUES('101','News','John','G','8/11/2000','502','5','25');
INSERT INTO EMP_2_MOD VALUES('102','Senior','David','H','12/7/1989','501','8','');
INSERT INTO EMP_2_MOD VALUES('103','Arbough','June','E','1/12/1996','500','3.85','18');
INSERT INTO EMP_2_MOD VALUES('104','Ramoras','Anne','K','15/11/1987','501','10','');
INSERT INTO EMP_2_MOD VALUES('105','Johnson','Alice','K','1/2/1993','502','5','25');
INSERT INTO EMP_2_MOD VALUES('106','Smithfield','William','','22/6/2004','500','6.2','18');
INSERT INTO EMP_2_MOD VALUES('107','Alonzo','Maria','D','10/10/1993','500','5.15','18');
INSERT INTO EMP_2_MOD VALUES('108','Washington','Ralph','B','22/8/1991','501','10','');
INSERT INTO EMP_2_MOD VALUES('109','Smith','Larry','W','18/7/1997','501','2','');

/* -- */

CREATE TABLE EMPLOYEE (
EMP_NUM varchar(3),
EMP_LNAME varchar(15),
EMP_FNAME varchar(15),
EMP_INITIAL varchar(1),
EMP_HIREDATE date,
JOB_CODE varchar(3),
EMP_YEARS int
);
INSERT INTO EMPLOYEE VALUES('101','News','John','G','8/11/2000','502','4');
INSERT INTO EMPLOYEE VALUES('102','Senior','David','H','12/7/1989','501','15');
INSERT INTO EMPLOYEE VALUES('103','Arbough','June','E','1/12/1996','503','8');
INSERT INTO EMPLOYEE VALUES('104','Ramoras','Anne','K','15/11/1987','501','17');
INSERT INTO EMPLOYEE VALUES('105','Johnson','Alice','K','1/2/1993','502','12');
INSERT INTO EMPLOYEE VALUES('106','Smithfield','William','','22/6/2004','500','0');
INSERT INTO EMPLOYEE VALUES('107','Alonzo','Maria','D','10/10/1993','500','11');
INSERT INTO EMPLOYEE VALUES('108','Washington','Ralph','B','22/8/1991','501','13');
INSERT INTO EMPLOYEE VALUES('109','Smith','Larry','W','18/7/1997','501','7');
INSERT INTO EMPLOYEE VALUES('110','Olenko','Gerald','A','11/12/1995','505','9');
INSERT INTO EMPLOYEE VALUES('111','Wabash','Geoff','B','4/4/1991','506','14');
INSERT INTO EMPLOYEE VALUES('112','Smithson','Darlene','M','23/10/1994','507','10');
INSERT INTO EMPLOYEE VALUES('113','Joenbrood','Delbert','K','15/11/1996','508','8');
INSERT INTO EMPLOYEE VALUES('114','Jones','Annelise','','20/8/1993','508','11');
INSERT INTO EMPLOYEE VALUES('115','Bawangi','Travis','B','25/1/1992','501','13');
INSERT INTO EMPLOYEE VALUES('116','Pratt','Gerald','L','5/3/1997','510','8');
INSERT INTO EMPLOYEE VALUES('117','Williamson','Angie','H','19/6/1996','509','8');
INSERT INTO EMPLOYEE VALUES('118','Frommer','James','J','4/1/2005','510','0');

/* -- */

CREATE TABLE JOB (
JOB_CODE varchar(3),
JOB_DESCRIPTION varchar(25),
JOB_CHG_HOUR float(8),
JOB_LAST_UPDATE date
);
INSERT INTO JOB VALUES('500','Programmer','35.75','20/11/2009');
INSERT INTO JOB VALUES('501','Systems Analyst','96.75','20/11/2009');
INSERT INTO JOB VALUES('502','Database Designer','125','24/3/2010');
INSERT INTO JOB VALUES('503','Electrical Engineer','84.5','20/11/2009');
INSERT INTO JOB VALUES('504','Mechanical Engineer','67.9','20/11/2009');
INSERT INTO JOB VALUES('505','Civil Engineer','55.78','20/11/2009');
INSERT INTO JOB VALUES('506','Clerical Support','26.87','20/11/2009');
INSERT INTO JOB VALUES('507','DSS Analyst','45.95','20/11/2009');
INSERT INTO JOB VALUES('508','Applications Designer','48.1','24/3/2010');
INSERT INTO JOB VALUES('509','Bio Technician','34.55','20/11/2009');
INSERT INTO JOB VALUES('510','General Support','18.36','20/11/2009');

/* -- */

CREATE TABLE PROJECT (
PROJ_NUM varchar(3),
PROJ_NAME varchar(25),
PROJ_VALUE float(8),
PROJ_BALANCE float(8),
EMP_NUM varchar(3)
);
INSERT INTO PROJECT VALUES('15','Evergreen','1453500','1002350','103');
INSERT INTO PROJECT VALUES('18','Amber Wave','3500500','2110346','108');
INSERT INTO PROJECT VALUES('22','Rolling Tide','805000','500345.2','102');
INSERT INTO PROJECT VALUES('25','Starflight','2650500','2309880','107');

ALTER TABLE ONLY assignment ALTER COLUMN assign_job TYPE VARCHAR(3), ALTER COLUMN assign_job SET NOT NULL;

ALTER TABLE ONLY assignment ALTER COLUMN assign_num TYPE INTEGER, ALTER COLUMN assign_num SET NOT NULL;

ALTER TABLE assignment ADD PRIMARY KEY (assign_num);

DROP TABLE emp_1;

DROP TABLE emp_2;

DROP TABLE emp_2_mod;

ALTER TABLE ONLY employee ALTER COLUMN emp_num TYPE VARCHAR(3), ALTER COLUMN emp_num SET NOT NULL;

ALTER TABLE employee ADD PRIMARY KEY (emp_num);

ALTER TABLE ONLY job ALTER COLUMN job_code TYPE VARCHAR(3), ALTER COLUMN job_code SET NOT NULL;

ALTER TABLE job ADD PRIMARY KEY (job_code);

ALTER TABLE ONLY project ALTER COLUMN proj_num TYPE VARCHAR(3), ALTER COLUMN proj_num SET NOT NULL;

ALTER TABLE project ADD PRIMARY KEY (proj_num);

ALTER TABLE assignment ADD CONSTRAINT employee_assignment_fk
FOREIGN KEY (emp_num)
REFERENCES employee (emp_num)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE project ADD CONSTRAINT employee_project_fk
FOREIGN KEY (emp_num)
REFERENCES employee (emp_num)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE assignment ADD CONSTRAINT job_assignment_fk
FOREIGN KEY (assign_job)
REFERENCES job (job_code)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE employee ADD CONSTRAINT job_employee_fk
FOREIGN KEY (job_code)
REFERENCES job (job_code)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE assignment ADD CONSTRAINT project_assignment_fk
FOREIGN KEY (proj_num)
REFERENCES project (proj_num)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;
